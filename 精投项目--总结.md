# 精投前端

## 一、WdatePicker时间控件初始化

```html
<div class="inputDiv">
	<input type="text" style="height: 25px;width: 60px;float:none;border: 1px solid  #00BBFF !important;" class="Wdate" id="year" />
</div>
```

有两个不同路径的**WdatePicker.js**，内部分别引入同路径下的**skin/WdatePicker.css**，会在css最后引入，所以自定义css中修改是不会生效。

```html
<!-- 代表蓝色背景 -->
<script src="../../../plugins/datePicker/My97DatePicker/WdatePicker.js" type="text/javascript"></script>

<!-- 代表默认白色背景 -->
<script src="../../../plugins/My97DatePicker/WdatePicker.js" type="text/javascript"></script>
```

```javascript
var initControls = function(){
    //初始化年份控件
	$('#year').click(function(){
			WdatePicker({
				dateFmt:'yyyy',isShowToday:false
		    })
    });
    $('#year').val(new Date().getFullYear() - 1);
    //获取值
    $('#year').val();
}
```



## 二、HTML5嵌入自定义数据

```html
<div id="one" data-flag="1"></div>
<div id="two" data-flag="2"></div>
```

```js
//data()属于jQuery，需要将对象转为jQuery。比如:$(this)
$("#one").data("flag");
$("#two").data("flag")
```



## 三、width:0作用

```html
<div style="background-color: red; border: 10px blue solid; width: 200px; height: 100px; margin:20px; padding:40px">
    郭天航
</div>
```

<div style="background-color: red; border: 10px blue solid; width: 200px; height: 100px; margin:20px; padding:40px; margin:0 auto; text-align:center">
    郭天航
</div>
<img src="精投项目--总结_img/123.bmp" style="zoom:80%;" />

该div的宽度 = 200px + 40px *2 + 10px *2 +20px *2

**width:0 ：文本域宽度为0 ；可以设置border绘制图形。**

## 四、calc()注意

```html
width: calc(100% - 10px);
```

<span style="color: red; font-size: 15px">注意：运算符前后加空格，否则不生效。</span>

## 五、Unicode符号

 ' &times';代表 &times; 

## 六、操作表格

```html
<div style="width: 100%;height: calc(100% - 35px);">
	<table id="wsi_tableGrid" style="width: 100%;height: 100%;"></table>
</div>
```

### 6.1 获取表头数据

```javascript
// ajaxPath:ajax请求根路径   repId: 左侧树对应Id
var finaltitle = mCommon.getTitle(ajaxPath, repId);
// 表格左侧固定列表头
var leftcols= finaltitle.leftcols;
// 表格右侧数据表头
var rightcols= finaltitle.rightcols;

```

### 6.2 单独设置列属性

数据库中设置FORMATTER = '。remarkFormatter。'，其中的remarkFormatter是自己写的方法，当渲染数据时会通过该方法对该列进行重构，包括为某列添加背景色等。

```javascript
//value代表值、row代表该行的数据、index代表下标索引
function fileFormatter(value,row,index){
  return `<span class="item-detail">文件</span>`;
};
```

### 6.3单击单元格触发

```javascript
onClickCell: function(rowIndex, field, value){
}
```

### 6.4结束编辑触发

```javascript
onAfterEdit:function(index,row,changes){
}
```

### 6.5设置行样式(汇总行颜色)

```javascript
rowStyler: function(index, row) {
    style = "";
    // 若行存在且有bgcolor属性 则赋予行颜色（用于合计行）
    if (row && row.bgcolor) {
        style += 'background-color:'+row.bgcolor+' !important;';
    }
    if (row && row.bold == '1') {
        style += 'font-weight:bold !important;';
    }
    return style;
}
```

### 6.6 获取选中行的数据

```javascript
var rows = $itemGrid.datagrid('getChecked');
var rowsSelections = $reportGrid.datagrid('getSelections');
```

### 6.7为表格赋值

```javascript
//表格id  compJson需要的为json数据
$("#compCapitalGrid").datagrid('loadData',compJson);
```

### 6.8表格添加多选框

```javascript
//设置第一列为选择框时
leftcols[0].unshift({field:'ck',width:'60',checkbox:true});
```

## 七、下拉框

```javascript
<div class="inputDiv">
	<label>状态</label> <input id="wsi_state" size="18" style="width: 120px;">	
</div>
```

```javascript
$state.combobox({
    data:global.stateList,
    valueField: 'id',
    textField: 'text',
    multiple:false,//是否支持多选
    editable:false,
    panelWidth: 120,//下拉数据所占宽度
    panelHeight: 'auto'
}).combobox('setValue',global.stateList[0].id);
```

