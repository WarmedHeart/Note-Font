# Node.js简介

​	基于Google V8引擎，并结合Libuv扩展了io、fs特性。使之具有DOM（浏览器）和IO、文件读写、操作数据库（服务器端）等能力（浏览器下js不能读取用户文件）。

1. 事件驱动
2. 非阻塞IO模型（异步）、
3. 轻量、高效

#  模块化

require引入一个模块多次，仅在第一次**执行一次**

require引入第三方包过程：

 1. require('第三方包')优先在所在文件的同级目录`node_modules`中出查找第三方包。

    ![image-20201127162437422](C:\Users\25681\AppData\Roaming\Typora\typora-user-images\image-20201127162437422.png)

 2. 找到第三方包的`package.json`文件，并找到里面的`main`属性对应的入口模块，指定的文件即加载的第三方模块。

    ![image-20201127162518498](C:\Users\25681\AppData\Roaming\Typora\typora-user-images\image-20201127162518498.png)

	3. 如果要加载的第三方包中没有找到`package.json`文件或`package.json`文件中没有main属性，则默认加载第三方包中的index.js文件。

    ![image-20201127165713278](C:\Users\25681\AppData\Roaming\Typora\typora-user-images\image-20201127165713278.png)

4. 如果没有node_modules文件夹，或者以上情况都没有找到，则会向上一级父级目录查找node_modules文件夹，查找规则同上。
5. 直到找到该模块的磁盘根目录都没有找到，则会报错：can not find module ×××

# 文件fs读取、写入

​	查看官方文档：都有`同步异步`操作

​	注意：在传文件名称时记得str.`trim()`清除字符串两边空行，读取文件内容最后的回车等在打印.tostring()不会看出来。

​	  `Buffer`对象：在内存开辟固定大小连续的空间用来保存数据。

​	cheerio依赖包

其他：

当前文件夹cmd操作：Shift + 右键 打开powershell













1. 浏览器

* 渲染引擎：WebKit
  * 默认的JS Core引擎（Google更改为V8引擎）：加载并执行js代码
* Js引擎执行过程：源代码 - AST - 字节码 - JIT解释器 - 本地代码
  * V8 版本5.9之前，没有生成中间字节码，放弃了在字节码阶段进行的一些性能优化，但保证了执行速度。会在运行时，通过Profiler线程收集信息，来优化本地代码。**空间换时间**。
    * 内联缓存
  * V8 版本5.9，新增了Ignitiion字节码解释器，中间会生成字节码。减轻机器码占用的内存空间。**时间换空间**，降低代码复杂度，提高代码的启动速度。
* 数据表示：句柄+数据实际长度
  * 编译型语言，在编译阶段直接生成机器码，变量的类型和占用内存已经确定，直接根据偏移量查找内存位置。
  * 解释型语言，运行时才确定变量类型，JS需要通过属性名匹配才能找到所需偏移量进而找到内存中的位置。
    * 句柄指向数据的指针
    * 数据实际长度：隐藏类指针、属性值表指针、元素表指针
* 内存管理：年轻代（复制算法）、年老代（标记清除算法或标记整理算法）、大对象
* 快照：将数据加载之后，将内存保存并序列化。下次直接加载进内存即可。

2. **Node.js 单进程单线程应用程序**，**V8引擎提供的异步执行回调接口**，通过这些接口可以处理大量的并发，性能较高



3. console.log('hello world’)到cpu执行的中间过程
4. 观察者模式































